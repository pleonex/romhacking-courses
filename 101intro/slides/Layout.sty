% Copyright (c) 2015 Benito Palacios Sánchez - All Rights Reserved.
% Esta obra está licenciada bajo la Licencia Creative Commons Atribución 4.0
% Internacional. Para ver una copia de esta licencia, visita
% http://creativecommons.org/licenses/by/4.0/.

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{Layout}[2015/09/14 IEEE Presentation Layout Style]
\RequirePackage[T1]{fontenc}        % Output font
\RequirePackage[utf8]{inputenc}     % Input encoding

% Remove navigation symbol at the bottom
\setbeamertemplate{navigation symbols}{}

% Overlay transparency
\setbeamercovered{transparent}

% A list with more vertical separation between elements
\newenvironment<>{wideitemize}
{\itemize\addtolength{\itemsep}{10pt}}
{\enditemize}

% A graphic with caption
\newcommand{\includefigure}[2]{%
    \begin{figure}
        \includegraphics[width=\textwidth,keepaspectratio]{#2}
        \caption{\footnotesize#1}
    \end{figure}
}

% For backup / appendix slides
\newcommand{\backupbegin}{
   \newcounter{framenumberappendix}
   \setcounter{framenumberappendix}{\value{framenumber}}
}

\newcommand{\backupend}{
   \addtocounter{framenumberappendix}{-\value{framenumber}}
   \addtocounter{framenumber}{\value{framenumberappendix}}
}

% Add a footline, code copied from infolines outer theme
\setbeamertemplate{footline}
{
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=.30\paperwidth,ht=2.25ex,dp=1ex,center]{author in head/foot}%
    \usebeamerfont{author in head/foot}\insertshortauthor\expandafter\beamer@ifempty\expandafter{\beamer@shortinstitute}{}{~~(\insertshortinstitute)}
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.45\paperwidth,ht=2.25ex,dp=1ex,center]{title in head/foot}%
    \usebeamerfont{title in head/foot}\inserttitle
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.25\paperwidth,ht=2.25ex,dp=1ex,right]{date in head/foot}%
    \usebeamerfont{date in head/foot}\insertshortdate{}\hspace*{2em}
    \insertframenumber{} / \inserttotalframenumber\hspace*{2ex}
  \end{beamercolorbox}}%
  \vskip0pt%
}


% Define new variables
\def\authortitle#1{\def\@authortitle{#1}}
\def\authoremail#1{\def\@authoremail{#1}}
\def\titlelogo#1{\def\@titlelogo{#1}}

% Title page customized from Beamer2Thesis package. More info:
% https://github.com/cfiandra/Beamer2Thesis/blob/master/latex/beamerinnerthemetorinoth.sty
\setbeamertemplate{title page}
{
   % University % Logo
   \begin{centering}
     % University
     \begin{beamercolorbox}[rounded=true,shadow=true,ht=2.5ex,wd=.89\paperwidth,sep=3pt,center]{palette primary}
       \insertinstitute\par%
     \end{beamercolorbox}
     \vskip0.5em%

    % Logo
    \includegraphics[height=.2\paperheight]{\@titlelogo}
    \vfill

  \end{centering}
  \vskip0.25em

  % Title
  \begin{centering}
     \begin{beamercolorbox}[wd=\paperwidth,sep=8pt,center]{palette primary}
       \usebeamerfont{title}\inserttitle\par%
     \end{beamercolorbox}%
  \end{centering}

  \vskip0.75em\par%

  % Author
  \begin{centering}
      \vspace{\stretch{0.25}}%
      \begin{beamercolorbox}[ht=0.075\paperheight,sep=8pt,center]{white}
        \usebeamerfont{definition}\@authortitle
      \end{beamercolorbox}

      \begin{beamercolorbox}[ht=0.15\paperheight,sep=8pt,center]{white}
        \usebeamerfont{person}\textbf{\textit{\insertauthor}} \\~ \@authoremail
      \end{beamercolorbox}
      \vspace{\stretch{1}}%
  \end{centering}
  \vfill

  % Date
  \begin{centering}
    \begin{beamercolorbox}[sep=8pt,center]{white}
      \usebeamerfont{date}\insertdate{}
    \end{beamercolorbox}
  \end{centering}
  \vfill
}
